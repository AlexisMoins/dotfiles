#!/bin/zsh
# Author: Alexis Moins
# Creation: 01 aug 2021

# Location of the `.dotfiles` directory
_dotfiles="${0:t:P}"

# Directories needed in order for vim to work correctly
[[ ! -d "${_dotfiles}/.vim/.undo" ]] && mkdir -v "${_dotfiles}/.vim/.undo"

# Directories needed in order for zsh to work correctly
[[ ! -d "${_dotfiles}/.zsh/cache" ]] && mkdir -pv "${_dotfiles}/.zsh/cache/completion"

# Configures homebrew based on the Brewfile
brew bundle --file="${_dotfiles}/Brewfile"

# Symlinks the dotfiles
stow --restow .

# Cleans the environment
unset _dotfiles
