#!/usr/bin/env zsh
# Author: Alexis Moins
# Creation: 29 oct 2021

# Location of the .dotfiles directory
dotfiles="${0:h}"

# Directories needed for proper work
directories=( "${dotfiles}/.vim/.undo" "${dotfiles}/.zsh/.cache/completion" "${HOME}/.scripts" )

# Files and directories that must be ignored
ignored=( ".git" ".gitignore" "install" )

# Creates the necessary directories
for directory in "${directories}"; do
    mkdir -pv "${directory}"; done

# Links all files and directories
for link in "${dotfiles}/"*(D); do
    [[ -z "${ignored[(r)${link:t}]}" ]] && \
        ln -fnsv "${link:a}" "${HOME}/${link:t}"; done

# Cleans the environment
unset dotfiles directories ignored
